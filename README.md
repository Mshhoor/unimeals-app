# 🍽️ منصة وجبتي - UniMeals Platform

منصة متطورة لتبادل الوجبات الجامعية مع نظام التحقق الآمن والتقييمات المتقدمة.

## ✨ المميزات

- 🔐 **نظام التحقق الآمن**: التحقق من رقم الجوال عبر SMS
- 📱 **واجهة مستخدم متجاوبة**: تدعم الأجهزة المحمولة وأجهزة سطح المكتب
- ⭐ **نظام التقييمات**: تقييم البائعين لضمان الجودة
- 🔔 **إشعارات فورية**: تحديثات مباشرة عبر WebSocket
- 🌙 **الوضع الليلي**: واجهة مظلمة مريحة للعين
- 🚀 **سريع وموثوق**: بناء بتقنية Node.js وقاعدة بيانات SQLite
- 📊 **لوحة تحكم شاملة**: إدارة العروض والطلبات والإشعارات

## 🛠️ التقنيات المستخدمة

### Backend
- **Node.js** - بيئة تشغيل JavaScript
- **Express.js** - إطار عمل الويب
- **SQLite3** - قاعدة البيانات المحلية
- **Socket.IO** - التحديثات المباشرة
- **JWT** - المصادقة والتوكن
- **bcryptjs** - تشفير كلمات المرور

### Frontend
- **HTML5/CSS3** - البنية والتصميم
- **JavaScript (ES6+)** - المنطق والتفاعل
- **Socket.IO Client** - الاتصال المباشر
- **CSS Grid/Flexbox** - التخطيط المتجاوب

### الأمان والحماية
- **Helmet** - حماية HTTP Headers
- **CORS** - إدارة الطلبات من مصادر مختلفة
- **Rate Limiting** - حماية من الطلبات المتكررة
- **Input Validation** - التحقق من صحة البيانات

## 🚀 التثبيت والتشغيل

### المتطلبات
- Node.js (الإصدار 16.0 أو أعلى)
- npm أو yarn

### خطوات التثبيت

1. **استنساخ المشروع**
```bash
git clone <repository-url>
cd unimeals-app
```

2. **تثبيت الحزم**
```bash
npm install
```

3. **إعداد المتغيرات البيئية**
```bash
cp .env.example .env
# قم بتعديل الملف حسب بيئتك
```

4. **تهيئة قاعدة البيانات**
```bash
npm run init-db
```

5. **تشغيل الخادم**
```bash
# للتطوير
npm run dev

# للإنتاج
npm start
```

6. **فتح التطبيق**
```
http://localhost:3000
```

## 📁 هيكل المشروع

```
unimeals-app/
├── config/
│   └── database.js          # إعدادات قاعدة البيانات
├── routes/
│   ├── auth.js             # مسارات المصادقة والتحقق
│   ├── offers.js           # مسارات العروض
│   ├── ratings.js          # مسارات التقييمات
│   └── notifications.js    # مسارات الإشعارات
├── utils/
│   └── helpers.js          # دوال مساعدة
├── public/
│   ├── index.html          # الصفحة الرئيسية
│   ├── style.css           # ملفات التصميم
│   └── script.js           # منطق الواجهة الأمامية
├── scripts/
│   └── init-db.js          # سكريبت تهيئة قاعدة البيانات
├── data/
│   └── unimeals.db         # ملف قاعدة البيانات
├── server.js               # ملف الخادم الرئيسي
├── package.json            # معلومات المشروع والحزم
├── .env                    # متغيرات البيئة
└── README.md               # هذا الملف
```

## 🔧 API المتاح

### المصادقة
- `POST /api/auth/verify-phone` - إرسال كود التحقق
- `POST /api/auth/verify-code` - التحقق من الكود
- `POST /api/auth/verify-token` - التحقق من صحة التوكن
- `PUT /api/auth/update-profile` - تحديث الملف الشخصي

### العروض
- `GET /api/offers` - جلب جميع العروض
- `POST /api/offers` - إضافة عرض جديد
- `GET /api/offers/my-offers` - جلب عروض البائع
- `GET /api/offers/reservations` - جلب الحجوزات
- `POST /api/offers/:key/reserve` - حجز وجبة
- `POST /api/offers/:key/confirm` - تأكيد الحجز
- `POST /api/offers/:key/reject` - رفض الحجز
- `DELETE /api/offers/:key` - حذف عرض

### التقييمات
- `POST /api/ratings` - إضافة تقييم
- `GET /api/ratings/seller/:sellerId` - جلب تقييمات بائع
- `POST /api/ratings/bulk-stats` - إحصائيات متعددة
- `GET /api/ratings/top-sellers` - أفضل البائعين

### الإشعارات
- `GET /api/notifications` - جلب الإشعارات
- `PUT /api/notifications/:id/read` - تحديد كمقروء
- `PUT /api/notifications/mark-all-read` - تحديد الكل كمقروء
- `DELETE /api/notifications/:id` - حذف إشعار

## 🔐 الأمان والحماية

### مميزات الأمان
- **JWT Tokens**: مصادقة آمنة بدون جلسات
- **Rate Limiting**: حماية من الهجمات المتكررة
- **Input Validation**: التحقق من صحة جميع البيانات
- **SQL Injection Protection**: استخدام Prepared Statements
- **XSS Protection**: تنظيف البيانات المدخلة
- **CORS Configuration**: إدارة الطلبات الخارجية

### نصائح أمنية للإنتاج
1. غير `JWT_SECRET` إلى قيمة قوية وعشوائية
2. غير `ADMIN_PASSWORD` إلى كلمة مرور قوية
3. فعّل HTTPS في الإنتاج
4. استخدم خدمة SMS حقيقية بدلاً من المحاكاة
5. قم بتحديث جميع الحزم بانتظام

## 📱 استخدام المنصة

### للبائعين
1. **التسجيل**: أدخل رقم الجوال وتحقق منه
2. **إضافة عرض**: أضف تفاصيل الوجبة والسعر
3. **إدارة الطلبات**: راجع واقبل/ارفض طلبات الحجز
4. **تتبع الوجبات**: راقب حالة جميع عروضك

### للمشترين
1. **تصفح العروض**: شاهد جميع الوجبات المتاحة
2. **حجز وجبة**: احجز الوجبة المطلوبة
3. **تقييم البائع**: قيم تجربتك مع البائع
4. **التواصل**: تواصل مع البائع عبر واتساب

## 🌟 البيانات التجريبية

بعد تشغيل `npm run init-db`، ستحصل على:

### مستخدمين تجريبيين:
- أحمد محمد: 0512345678
- فاطمة علي: 0587654321  
- محمد السالم: 0501234567
- نورا أحمد: 0559876543
- عبدالله الخالد: 0566789012

### عروض تجريبية:
- وجبات فطور وغداء وعشاء متنوعة
- حالات مختلفة (متاح، محجوز، مباع)
- تقييمات وإشعارات تجريبية

## 🚀 التطوير

### تشغيل في وضع التطوير
```bash
npm run dev
```

### البناء للإنتاج
```bash
# تأكد من تحديث المتغيرات في .env
NODE_ENV=production npm start
```

### اختبار API
```bash
# فحص حالة الخادم
curl http://localhost:3000/api/health

# جلب العروض
curl http://localhost:3000/api/offers
```

## 🐛 استكشاف الأخطاء

### مشاكل شائعة وحلولها

1. **خطأ في الاتصال بقاعدة البيانات**
   ```bash
   # احذف قاعدة البيانات وأعد إنشاؤها
   rm data/unimeals.db
   npm run init-db
   ```

2. **Port مستخدم بالفعل**
   ```bash
   # غير المنفذ في .env
   PORT=3001
   ```

3. **مشاكل في التحقق من SMS**
   - في بيئة التطوير، الكود سيظهر في الكونسول
   - تأكد من أن رقم الجوال يبدأ بـ 05

4. **مشاكل في Socket.IO**
   - تأكد من أن المتصفح يدعم WebSocket
   - تحقق من إعدادات الجدار الناري

## 🤝 المساهمة

نرحب بالمساهمات! يرجى:

1. Fork المشروع
2. إنشاء branch جديد للميزة
3. Commit التغييرات
4. Push إلى branch
5. فتح Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف [LICENSE](LICENSE) للتفاصيل.

## 📞 الدعم والتواصل

- **المشاكل التقنية**: افتح Issue في GitHub
- **الاقتراحات**: ارسل Pull Request
- **الدعم العام**: تواصل معنا عبر البريد الإلكتروني

## 🙏 شكر وتقدير

شكراً لجميع المساهمين والمطورين الذين ساعدوا في تطوير هذا المشروع.

---

💡 **ملاحظة**: هذا المشروع تعليمي وغير مخصص للاستخدام التجاري المباشر. يرجى إضافة المزيد من ميزات الأمان قبل النشر في الإنتاج.

🚀 **ابدأ الآن**: `npm install && npm run init-db && npm start`


✅ جاهز:
🌐 الموقع شغال على:
http://localhost:3000

🔗 نقطة الوصول للـ API:
http://localhost:3000/api

